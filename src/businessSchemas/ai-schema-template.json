{
  "schemaVersion": "1.0.0",
  "businessType": "Template Business Type",
  "displayName": "Template Business Type",
  "description": "Template AI JSON schema for business automation",
  "updatedAt": "2025-01-05",
  "author": "Floworx Automation Core",
  
  "metadata": {
    "industry": "Template Industry",
    "primaryServices": ["Service 1", "Service 2", "Service 3"],
    "targetCustomers": ["Residential", "Commercial"],
    "seasonality": "Year-round",
    "emergencyServices": true,
    "warrantyServices": true,
    "supplierDependent": true
  },

  "aiConfiguration": {
    "toneProfile": {
      "primary": "Professional and reassuring",
      "secondary": "Friendly and helpful",
      "emergency": "Urgent and action-oriented",
      "sales": "Enthusiastic and consultative"
    },
    "responseStyle": {
      "length": "concise",
      "formality": "professional",
      "urgency": "context-aware",
      "personalization": "high"
    },
    "classificationModel": "gpt-4o-mini",
    "confidenceThreshold": 0.8,
    "fallbackLabel": "MISC"
  },

  "intentMapping": {
    "ai.service_request": "SERVICE",
    "ai.financial_transaction": "BANKING", 
    "ai.emergency_request": "URGENT",
    "ai.warranty_claim": "WARRANTY",
    "ai.support_request": "SUPPORT",
    "ai.sales_inquiry": "SALES",
    "ai.supplier_communication": "SUPPLIERS",
    "ai.management_oversight": "MANAGER",
    "ai.review_management": "GOOGLE REVIEW",
    "ai.form_submission": "FORMSUB",
    "ai.phone_communication": "PHONE",
    "ai.marketing_communication": "PROMO",
    "ai.hr_communication": "RECRUITMENT",
    "ai.social_media": "SOCIALMEDIA",
    "ai.general_communication": "MISC"
  },

  "keywords": {
    "primary": ["keyword1", "keyword2", "keyword3"],
    "secondary": ["keyword4", "keyword5", "keyword6"],
    "emergency": ["urgent", "emergency", "asap", "immediately"],
    "service": ["repair", "install", "maintenance", "service"],
    "financial": ["invoice", "payment", "quote", "estimate"],
    "warranty": ["warranty", "claim", "defect", "replacement"],
    "negative": ["problem", "issue", "broken", "not working"]
  },

  "labelSchema": {
    "colors": {
      "BANKING": { "backgroundColor": "#16a766", "textColor": "#ffffff" },
      "FORMSUB": { "backgroundColor": "#0b804b", "textColor": "#ffffff" },
      "GOOGLE_REVIEW": { "backgroundColor": "#fad165", "textColor": "#000000" },
      "MANAGER": { "backgroundColor": "#ffad47", "textColor": "#000000" },
      "SERVICE": { "backgroundColor": "#4a86e8", "textColor": "#ffffff" },
      "WARRANTY": { "backgroundColor": "#a479e2", "textColor": "#ffffff" },
      "SUPPORT": { "backgroundColor": "#4a86e8", "textColor": "#ffffff" },
      "SALES": { "backgroundColor": "#149e60", "textColor": "#ffffff" },
      "SUPPLIERS": { "backgroundColor": "#ffad47", "textColor": "#000000" },
      "URGENT": { "backgroundColor": "#fb4c2f", "textColor": "#ffffff" },
      "MISC": { "backgroundColor": "#999999", "textColor": "#ffffff" },
      "PROMO": { "backgroundColor": "#43d692", "textColor": "#000000" },
      "RECRUITMENT": { "backgroundColor": "#e07798", "textColor": "#ffffff" },
      "PHONE": { "backgroundColor": "#6d9eeb", "textColor": "#ffffff" },
      "SOCIALMEDIA": { "backgroundColor": "#ffad47", "textColor": "#000000" }
    },
    
    "labels": {
      "BANKING": {
        "color": "BANKING",
        "sub": ["Invoice", "Receipts", "Refund", "Payment Confirmation", "Bank Alert", "e-Transfer"],
        "nested": {
          "Receipts": ["Payment Sent", "Payment Received"]
        },
        "intent": "ai.financial_transaction",
        "critical": true,
        "description": "Financial transactions, invoices, payments, and banking alerts",
        "n8nEnvVar": "LABEL_BANKING"
      },
      
      "FORMSUB": {
        "color": "FORMSUB", 
        "sub": ["New Submission", "Work Order Forms", "Service Requests", "Quote Requests"],
        "intent": "ai.form_submission",
        "critical": false,
        "description": "Customer form submissions and work order processing",
        "n8nEnvVar": "LABEL_FORMSUB"
      },
      
      "GOOGLE_REVIEW": {
        "color": "GOOGLE_REVIEW",
        "sub": ["New Reviews", "Review Responses", "Review Requests"],
        "intent": "ai.review_management", 
        "critical": false,
        "description": "Google reviews, reputation management, and customer feedback",
        "n8nEnvVar": "LABEL_GOOGLE_REVIEW"
      },
      
      "MANAGER": {
        "color": "MANAGER",
        "sub": ["Unassigned", "Team Assignments", "Manager Review", "Escalations"],
        "intent": "ai.management_oversight",
        "critical": false,
        "description": "Management oversight, team assignments, and escalations",
        "n8nEnvVar": "LABEL_MANAGER"
      },
      
      "SERVICE": {
        "color": "SERVICE",
        "sub": ["Repairs", "Installations", "Maintenance", "Emergency Service"],
        "nested": {
          "Repairs": ["Emergency Repairs", "Scheduled Repairs", "Warranty Repairs"],
          "Installations": ["New Installations", "Upgrades", "Replacements"],
          "Maintenance": ["Regular Maintenance", "Seasonal Maintenance", "Preventive Maintenance"]
        },
        "intent": "ai.service_request",
        "critical": true,
        "description": "All service operations including repairs, installations, and maintenance",
        "n8nEnvVar": "LABEL_SERVICE"
      },
      
      "WARRANTY": {
        "color": "WARRANTY",
        "sub": ["Claims", "Pending Review", "Resolved", "Denied", "Warranty Parts"],
        "nested": {
          "Claims": ["New Claims", "Claim Documentation", "Claim Follow-up"],
          "Warranty Parts": ["Parts Ordered", "Parts Received", "Parts Installation"]
        },
        "intent": "ai.warranty_claim",
        "critical": true,
        "description": "Warranty claims, parts, and warranty-related communications",
        "n8nEnvVar": "LABEL_WARRANTY"
      },
      
      "SUPPORT": {
        "color": "SUPPORT",
        "sub": ["Technical Support", "General Support", "Product Questions", "Troubleshooting"],
        "nested": {
          "Technical Support": ["Remote Support", "Technical Documentation", "Diagnostics"],
          "Product Questions": ["Specifications", "Compatibility", "Usage Instructions"]
        },
        "intent": "ai.support_request",
        "critical": false,
        "description": "Customer support, technical assistance, and product inquiries",
        "n8nEnvVar": "LABEL_SUPPORT"
      },
      
      "SALES": {
        "color": "SALES",
        "sub": ["New Sales", "Consultations", "Quotes", "Follow-ups"],
        "nested": {
          "New Sales": ["Product Sales", "Package Deals", "Financing Options"],
          "Consultations": ["Site Visits", "Product Demos", "Custom Quotes"]
        },
        "intent": "ai.sales_inquiry",
        "critical": false,
        "description": "Sales activities, consultations, and new business development",
        "n8nEnvVar": "LABEL_SALES"
      },
      
      "SUPPLIERS": {
        "color": "SUPPLIERS",
        "sub": ["Supplier A", "Supplier B", "Supplier C"],
        "nested": {
          "Supplier A": ["Orders", "Support", "Warranty Claims"],
          "Supplier B": ["Orders", "Support", "Warranty Claims"],
          "Supplier C": ["Orders", "Support", "Warranty Claims"]
        },
        "intent": "ai.supplier_communication",
        "critical": false,
        "description": "Supplier communications, orders, and vendor management",
        "n8nEnvVar": "LABEL_SUPPLIERS"
      },
      
      "URGENT": {
        "color": "URGENT",
        "sub": ["Emergency Repairs", "Safety Issues", "Critical Problems"],
        "intent": "ai.emergency_request",
        "critical": true,
        "description": "Urgent and emergency situations requiring immediate attention",
        "n8nEnvVar": "LABEL_URGENT"
      },
      
      "PHONE": {
        "color": "PHONE",
        "sub": ["Incoming Calls", "Outgoing Calls", "Voicemails", "Call Logs"],
        "intent": "ai.phone_communication",
        "critical": false,
        "description": "Phone communications and call management",
        "n8nEnvVar": "LABEL_PHONE"
      },
      
      "PROMO": {
        "color": "PROMO",
        "sub": ["Email Campaigns", "Social Media", "Newsletters", "Special Offers"],
        "intent": "ai.marketing_communication",
        "critical": false,
        "description": "Promotional materials, marketing campaigns, and special offers",
        "n8nEnvVar": "LABEL_PROMO"
      },
      
      "RECRUITMENT": {
        "color": "RECRUITMENT",
        "sub": ["Job Applications", "Interview Scheduling", "New Hires", "HR Communications"],
        "intent": "ai.hr_communication",
        "critical": false,
        "description": "Recruitment, hiring, and human resources communications",
        "n8nEnvVar": "LABEL_RECRUITMENT"
      },
      
      "SOCIALMEDIA": {
        "color": "SOCIALMEDIA",
        "sub": ["Facebook", "Instagram", "Google My Business", "LinkedIn"],
        "intent": "ai.social_media",
        "critical": false,
        "description": "Social media communications and platform management",
        "n8nEnvVar": "LABEL_SOCIALMEDIA"
      },
      
      "MISC": {
        "color": "MISC",
        "sub": ["General", "Archive", "Personal"],
        "intent": "ai.general_communication",
        "critical": false,
        "description": "Miscellaneous communications and general items",
        "n8nEnvVar": "LABEL_MISC"
      }
    },
    
    "provisioningOrder": [
      "BANKING", "FORMSUB", "GOOGLE_REVIEW", "MANAGER", "SERVICE", 
      "WARRANTY", "SUPPORT", "SALES", "SUPPLIERS", "URGENT", 
      "PHONE", "PROMO", "RECRUITMENT", "SOCIALMEDIA", "MISC"
    ],
    
    "categoryGroups": {
      "Operations": ["SERVICE", "SUPPORT", "WARRANTY"],
      "Sales": ["SALES", "PROMO"],
      "Administration": ["BANKING", "MANAGER", "RECRUITMENT"],
      "Communications": ["PHONE", "SOCIALMEDIA"],
      "Suppliers": ["SUPPLIERS"],
      "CustomerExperience": ["GOOGLE_REVIEW", "FORMSUB"],
      "Critical": ["URGENT"],
      "General": ["MISC"]
    }
  },

  "dynamicVariables": {
    "managers": [
      { "name": "Manager1", "email": "manager1@business.com", "role": "General Manager" },
      { "name": "Manager2", "email": "manager2@business.com", "role": "Operations Manager" }
    ],
    "suppliers": [
      { "name": "Supplier A", "email": "orders@suppliera.com", "category": "Equipment" },
      { "name": "Supplier B", "email": "orders@supplierb.com", "category": "Parts" },
      { "name": "Supplier C", "email": "orders@supplierc.com", "category": "Materials" }
    ],
    "technicians": [
      { "name": "Tech1", "email": "tech1@business.com", "specialties": ["Repairs", "Installations"] },
      { "name": "Tech2", "email": "tech2@business.com", "specialties": ["Maintenance", "Emergency"] }
    ]
  },

  "escalationRules": {
    "urgent": {
      "threshold": "immediate",
      "notify": ["managers", "on_call_technician"],
      "sla": "15 minutes",
      "autoReply": true
    },
    "warranty": {
      "threshold": "24 hours",
      "notify": ["managers", "warranty_specialist"],
      "sla": "4 hours",
      "autoReply": false
    },
    "service": {
      "threshold": "2 hours",
      "notify": ["dispatcher"],
      "sla": "1 hour",
      "autoReply": true
    },
    "sales": {
      "threshold": "4 hours",
      "notify": ["sales_team"],
      "sla": "2 hours",
      "autoReply": true
    }
  },

  "aiPrompts": {
    "systemMessage": "You are an expert email processing and routing system for {{BUSINESS_NAME}}. Classify this email by returning JSON with summary, reasoning, confidence, primary_category, secondary_category, tertiary_category, entities, and ai_can_reply.",
    "replyPrompt": "Assistant role: Draft friendly, professional, and helpful replies for {{BUSINESS_NAME}} that:\n\nReflect prior conversation context\nClearly communicate next steps\nResolve concerns without delays or vagueness\nMatch the customer's tone, urgency, and message length\nMaintain a warm, human, and on-brand voice\nUse the structured guidance and rules below to reply with confidence, clarity, and care.",
    "classificationRules": [
      "Identify urgent keywords and route to URGENT label",
      "Recognize service requests and route to SERVICE label", 
      "Detect financial transactions and route to BANKING label",
      "Identify warranty claims and route to WARRANTY label",
      "Recognize supplier communications and route to SUPPLIERS label"
    ]
  },

  "environmentVariables": {
    "required": [
      "BUSINESS_NAME",
      "BUSINESS_PHONE", 
      "BUSINESS_DOMAIN_PRIMARY",
      "PAYMENT_EMAIL",
      "WEBSITE_BASE_URL",
      "TIMEZONE"
    ],
    "optional": [
      "BUSINESS_DOMAIN_SECONDARY",
      "WEBSITE_REPAIRS_FORM",
      "WEBSITE_PRODUCTS_PAGE",
      "SERVICE_AREA_PRIMARY",
      "DB_PREFIX"
    ],
    "pricing": [
      "PRICE_SITE_INSPECTION",
      "PRICE_LABOUR_HOURLY", 
      "PRICE_MILEAGE_RATE",
      "PRICE_DELIVERY_FEE"
    ]
  },

  "validation": {
    "requiredFields": ["businessType", "intentMapping", "labelSchema", "keywords"],
    "colorValidation": "Must use Gmail API allowed colors",
    "intentValidation": "All intents must map to valid labels",
    "envVarValidation": "All n8nEnvVar values must be unique"
  }
}
