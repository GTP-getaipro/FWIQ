{
  "schemaVersion": "1.0.0",
  "businessType": "Pools & Spas",
  "displayName": "Pools & Spas Business",
  "description": "AI JSON schema for Pools & Spas businesses including hot tubs, spas, cold plunges, and saunas",
  "updatedAt": "2025-01-05",
  "author": "Floworx Automation Core",
  
  "metadata": {
    "industry": "Pool & Spa Services",
    "primaryServices": ["Hot Tub Sales", "Spa Repairs", "Water Care", "Cold Plunge Installation", "Sauna Installation"],
    "targetCustomers": ["Residential", "Commercial"],
    "seasonality": "Year-round with peak in spring/summer",
    "emergencyServices": true,
    "warrantyServices": true,
    "supplierDependent": true
  },

  "aiConfiguration": {
    "toneProfile": {
      "primary": "Friendly and professional",
      "secondary": "Warm and helpful",
      "emergency": "Urgent and reassuring",
      "sales": "Enthusiastic and consultative"
    },
    "responseStyle": {
      "length": "concise",
      "formality": "professional",
      "urgency": "context-aware",
      "personalization": "high"
    },
    "classificationModel": "gpt-4o-mini",
    "confidenceThreshold": 0.8,
    "fallbackLabel": "MISC"
  },

  "intentMapping": {
    "ai.service_request": "SUPPORT",
    "ai.financial_transaction": "BANKING", 
    "ai.emergency_request": "URGENT",
    "ai.support_request": "SUPPORT",
    "ai.sales_inquiry": "SALES",
    "ai.supplier_communication": "SUPPLIERS",
    "ai.management_oversight": "MANAGER",
    "ai.review_management": "GOOGLE_REVIEW",
    "ai.form_submission": "FORMSUB",
    "ai.phone_communication": "PHONE",
    "ai.marketing_communication": "PROMO",
    "ai.hr_communication": "RECRUITMENT",
    "ai.social_media": "SOCIALMEDIA",
    "ai.general_communication": "MISC"
  },

  "keywords": {
    "primary": ["hot tub", "spa", "jacuzzi", "pool", "cold plunge", "sauna", "heater", "pump", "filter"],
    "secondary": ["water care", "chemicals", "maintenance", "repair", "installation", "warranty", "leak"],
    "emergency": ["urgent", "emergency", "leak", "not working", "broken", "asap", "immediately"],
    "service": ["repair", "install", "maintenance", "service", "water care", "chemical balance", "troubleshooting"],
    "financial": ["invoice", "payment", "quote", "estimate", "e-transfer", "refund"],
    "warranty": ["warranty", "claim", "defect", "replacement", "parts", "manufacturer"],
    "negative": ["problem", "issue", "broken", "not working", "leak", "error", "faulty"]
  },

  "labelSchema": {
    "colors": {
      "BANKING": { "backgroundColor": "#16a766", "textColor": "#ffffff" },
      "FORMSUB": { "backgroundColor": "#0b804b", "textColor": "#ffffff" },
      "GOOGLE_REVIEW": { "backgroundColor": "#fad165", "textColor": "#000000" },
      "MANAGER": { "backgroundColor": "#ffad47", "textColor": "#000000" },
      "SUPPORT": { "backgroundColor": "#4a86e8", "textColor": "#ffffff" },
      "SALES": { "backgroundColor": "#149e60", "textColor": "#ffffff" },
      "SUPPLIERS": { "backgroundColor": "#ffad47", "textColor": "#000000" },
      "URGENT": { "backgroundColor": "#fb4c2f", "textColor": "#ffffff" },
      "MISC": { "backgroundColor": "#999999", "textColor": "#ffffff" },
      "PROMO": { "backgroundColor": "#43d692", "textColor": "#000000" },
      "RECRUITMENT": { "backgroundColor": "#e07798", "textColor": "#ffffff" },
      "PHONE": { "backgroundColor": "#6d9eeb", "textColor": "#ffffff" },
      "SOCIALMEDIA": { "backgroundColor": "#ffad47", "textColor": "#000000" }
    },
    
    "labels": {
      "BANKING": {
        "color": "BANKING",
        "sub": ["Invoice", "Receipts", "Refund", "Payment Confirmation", "Bank Alert", "e-Transfer"],
        "nested": {
          "Receipts": ["Payment Sent", "Payment Received"]
        },
        "intent": "ai.financial_transaction",
        "critical": true,
        "description": "Financial transactions, invoices, payments, and banking alerts",
        "n8nEnvVar": "LABEL_BANKING"
      },
      
      "FORMSUB": {
        "color": "FORMSUB", 
        "sub": ["New Submission", "Work Order Forms", "Service Requests", "Quote Requests"],
        "intent": "ai.form_submission",
        "critical": false,
        "description": "Customer form submissions and work order processing",
        "n8nEnvVar": "LABEL_FORMSUB"
      },
      
      "GOOGLE_REVIEW": {
        "color": "GOOGLE_REVIEW",
        "sub": ["New Reviews", "Review Responses", "Review Requests"],
        "intent": "ai.review_management", 
        "critical": false,
        "description": "Google reviews, reputation management, and customer feedback",
        "n8nEnvVar": "LABEL_GOOGLE_REVIEW"
      },
      
      "MANAGER": {
        "color": "MANAGER",
        "sub": ["Unassigned", "Team Assignments", "Manager Review", "Escalations"],
        "intent": "ai.management_oversight",
        "critical": false,
        "description": "Management oversight, team assignments, and escalations",
        "n8nEnvVar": "LABEL_MANAGER"
      },
      
      "SERVICE": {
        "color": "SERVICE",
        "sub": ["Repairs", "Installations", "Maintenance", "Water Care Visits", "Warranty Service", "Emergency Service"],
        "nested": {
          "Repairs": ["Pump Repairs", "Heater Repairs", "Filter Repairs", "Leak Repairs", "Electrical Repairs"],
          "Installations": ["New Spa Installation", "Cold Plunge Installation", "Sauna Installation", "Accessory Installation"],
          "Maintenance": ["Regular Maintenance", "Seasonal Maintenance", "Winterization", "Spring Opening"],
          "Water Care Visits": ["Water Testing", "Chemical Balancing", "Filter Cleaning", "Water Treatment"]
        },
        "intent": "ai.service_request",
        "critical": true,
        "description": "All service operations including repairs, installations, and maintenance",
        "n8nEnvVar": "LABEL_SERVICE"
      },
      
      
      "SUPPORT": {
        "color": "SUPPORT",
        "sub": ["Appointment Scheduling", "Electrical Issues", "General", "Parts & Chemicals", "Technical Support", "Water Chemistry"],
        "nested": {
          "Technical Support": ["Troubleshooting", "Remote Support", "Technical Documentation"],
          "Water Chemistry": ["Water Testing", "Chemical Questions", "Water Balance Issues"],
          "Parts & Chemicals": ["Parts Orders", "Chemical Orders", "Product Questions"]
        },
        "intent": "ai.support_request",
        "critical": false,
        "description": "Customer support, technical assistance, and product inquiries",
        "n8nEnvVar": "LABEL_SUPPORT"
      },
      
      "SALES": {
        "color": "SALES",
        "sub": ["New Spa Sales", "Consultations", "Cold Plunge Sales", "Sauna Sales", "Accessory Sales"],
        "nested": {
          "New Spa Sales": ["Hot Tub Sales", "Spa Packages", "Financing Options"],
          "Consultations": ["Site Visits", "Product Demos", "Custom Quotes"]
        },
        "intent": "ai.sales_inquiry",
        "critical": false,
        "description": "Sales activities, consultations, and new business development",
        "n8nEnvVar": "LABEL_SALES"
      },
      
      "SUPPLIERS": {
        "color": "SUPPLIERS",
        "sub": ["AquaSpaPoolSupply", "ParadisePatioFurnitureLtd", "StrongSpas", "WaterwayPlastics", "Cold Plunge Co", "Sauna Suppliers"],
        "nested": {
          "AquaSpaPoolSupply": ["Parts Orders", "Chemical Orders", "Equipment Orders"],
          "ParadisePatioFurnitureLtd": ["Furniture Orders", "Accessory Orders", "Custom Orders"],
          "StrongSpas": ["Spa Orders", "Warranty Claims", "Technical Support"],
          "WaterwayPlastics": ["Plumbing Parts", "Filter Orders", "Replacement Parts"],
          "Cold Plunge Co": ["Cold Plunge Orders", "Installation Support", "Maintenance"],
          "Sauna Suppliers": ["Sauna Orders", "Heater Orders", "Accessory Orders"]
        },
        "intent": "ai.supplier_communication",
        "critical": false,
        "description": "Supplier communications, orders, and vendor management",
        "n8nEnvVar": "LABEL_SUPPLIERS"
      },
      
      "URGENT": {
        "color": "URGENT",
        "sub": ["Emergency Repairs", "Safety Issues", "Leak Emergencies", "Power Outages"],
        "intent": "ai.emergency_request",
        "critical": true,
        "description": "Urgent and emergency situations requiring immediate attention",
        "n8nEnvVar": "LABEL_URGENT"
      },
      
      "PHONE": {
        "color": "PHONE",
        "sub": ["Incoming Calls", "Outgoing Calls", "Voicemails", "Call Logs"],
        "intent": "ai.phone_communication",
        "critical": false,
        "description": "Phone communications and call management",
        "n8nEnvVar": "LABEL_PHONE"
      },
      
      "PROMO": {
        "color": "PROMO",
        "sub": ["Email Campaigns", "Social Media", "Newsletters", "Special Offers"],
        "intent": "ai.marketing_communication",
        "critical": false,
        "description": "Promotional materials, marketing campaigns, and special offers",
        "n8nEnvVar": "LABEL_PROMO"
      },
      
      "RECRUITMENT": {
        "color": "RECRUITMENT",
        "sub": ["Job Applications", "Interview Scheduling", "New Hires", "HR Communications"],
        "intent": "ai.hr_communication",
        "critical": false,
        "description": "Recruitment, hiring, and human resources communications",
        "n8nEnvVar": "LABEL_RECRUITMENT"
      },
      
      "SOCIALMEDIA": {
        "color": "SOCIALMEDIA",
        "sub": ["Facebook", "Instagram", "Google My Business", "LinkedIn"],
        "intent": "ai.social_media",
        "critical": false,
        "description": "Social media communications and platform management",
        "n8nEnvVar": "LABEL_SOCIALMEDIA"
      },
      
      "MISC": {
        "color": "MISC",
        "sub": ["General", "Archive", "Personal"],
        "intent": "ai.general_communication",
        "critical": false,
        "description": "Miscellaneous communications and general items",
        "n8nEnvVar": "LABEL_MISC"
      }
    },
    
    "provisioningOrder": [
      "BANKING", "SALES", "SUPPORT", "MANAGER", "SUPPLIERS", 
      "URGENT", "PHONE", "SOCIALMEDIA", "GOOGLE_REVIEW", "FORMSUB", 
      "RECRUITMENT", "PROMO", "MISC"
    ],
    
    "categoryGroups": {
      "Operations": ["SUPPORT"],
      "Sales": ["SALES", "PROMO"],
      "Administration": ["BANKING", "MANAGER", "RECRUITMENT"],
      "Communications": ["PHONE", "SOCIALMEDIA"],
      "Suppliers": ["SUPPLIERS"],
      "CustomerExperience": ["GOOGLE_REVIEW", "FORMSUB"],
      "Critical": ["URGENT"],
      "General": ["MISC"]
    }
  },

  "dynamicVariables": {
    "managers": [
      { "name": "Hailey", "email": "hailey@business.com", "role": "General Manager" },
      { "name": "Jillian", "email": "jillian@business.com", "role": "Operations Manager" },
      { "name": "Stacie", "email": "stacie@business.com", "role": "Service Manager" },
      { "name": "Aaron", "email": "aaron@business.com", "role": "Technical Manager" }
    ],
    "suppliers": [
      { "name": "AquaSpaPoolSupply", "email": "orders@aquaspapoolsupply.com", "category": "Pool Equipment" },
      { "name": "ParadisePatioFurnitureLtd", "email": "orders@paradisepatio.com", "category": "Furniture" },
      { "name": "StrongSpas", "email": "orders@strongspas.com", "category": "Spa Equipment" },
      { "name": "WaterwayPlastics", "email": "orders@waterwayplastics.com", "category": "Plumbing Parts" },
      { "name": "Cold Plunge Co", "email": "orders@coldplungeco.com", "category": "Cold Plunge Equipment" },
      { "name": "Sauna Suppliers", "email": "orders@saunasuppliers.com", "category": "Sauna Equipment" }
    ],
    "technicians": [
      { "name": "Tech1", "email": "tech1@business.com", "specialties": ["Spa Repairs", "Installations"] },
      { "name": "Tech2", "email": "tech2@business.com", "specialties": ["Water Care", "Maintenance"] },
      { "name": "Tech3", "email": "tech3@business.com", "specialties": ["Emergency Repairs", "Electrical"] }
    ]
  },

  "escalationRules": {
    "urgent": {
      "threshold": "immediate",
      "notify": ["managers", "on_call_technician"],
      "sla": "15 minutes",
      "autoReply": true
    },
    "warranty": {
      "threshold": "24 hours",
      "notify": ["managers", "warranty_specialist"],
      "sla": "4 hours",
      "autoReply": false
    },
    "service": {
      "threshold": "2 hours",
      "notify": ["dispatcher"],
      "sla": "1 hour",
      "autoReply": true
    },
    "sales": {
      "threshold": "4 hours",
      "notify": ["sales_team"],
      "sla": "2 hours",
      "autoReply": true
    }
  },

  "aiPrompts": {
    "systemMessage": "You are an expert email processing and routing system for {{BUSINESS_NAME}}. Classify this email by returning JSON with summary, reasoning, confidence, primary_category, secondary_category, tertiary_category, entities, and ai_can_reply.",
    "replyPrompt": "Assistant role: Draft friendly, professional, and helpful replies for {{BUSINESS_NAME}} that:\n\nReflect prior conversation context\nClearly communicate next steps\nResolve concerns without delays or vagueness\nMatch the customer's tone, urgency, and message length\nMaintain a warm, human, and on-brand voice\nUse the structured guidance and rules below to reply with confidence, clarity, and care.\n\nAlways prioritize accuracy, especially for dates and specific details. Strive for conciseness by omitting unnecessary requests or information that might be perceived as a burden to the customer.\n\nIntelligent Conversation Progression\nAssess conversation depth: If the customer is on their second or third message in a thread, avoid repeating earlier answers or re-asking for details they've already provided.\n\nWhen replying to follow-ups, do not summarize prior messages â€” instead, advance the resolution or confirm the next step.\n\nIf the human reply is incomplete, ensure the AI reply fills in the gaps: confirm all necessary details, include next steps, express gratitude, and close with warmth.\n\nAlways analyze the most recent customer input (e.g., specific attachments, details provided) to understand the current context of their request. Do not rely solely on the original problem statement. Acknowledge provided information and confirm relevant next steps or appointments clearly.\n\nðŸ”„ Follow-up Ownership & Clarity\nAlways state who will follow up and by when. Use concrete phrasing like:\n\n\"You'll hear back from Mark on Thursday with the quote.\"\n\nWhen appropriate, apologize for delays and explain the reason transparently (e.g., tech illness, part on backorder, truck reroute). This builds trust.\n\nPersonal Touch & Human Warmth\nUse friendly, human-like closings that show care and confidence:\n\n\"We'll see you then!\"\n\n\"You're all set â€” thanks again for choosing us!\"\n\n\"Appreciate your patience â€” we've got you covered.\"\n\nDon't default to corporate tone; be natural, concise, and helpful â€” like a trusted friend who happens to know a lot about hot tubs.\n\nAvoid Common Mistakes\nDon't offer broad options like \"repair or remove?\" in threads where a site inspection is already booked.\n\nDon't say \"We'll get back to you soon\" â€” say when and how.\n\nDon't suggest services already declined in the thread (e.g., if removal was rejected, don't re-offer).\n\nAlways provide the most up-to-date and concrete information available, even if not fully finalized. Transparency and specific details build customer confidence.\n\nPrioritize contextual accuracy. Confirm existing details like appointments, payment status, or scheduled deliveries if known or implied. Avoid asking for info already provided.\n\nWhen confirming service appointments, include relevant technician prep tips (like ensuring the tub is full) and acknowledge any uncertainty in the customer's initial diagnosis.\n\nWhen replying to confirmations, restate scheduled times, included products (like lids or filters), and clarify expectations in advance.\n\nWhen customers share rotating schedules or narrow availability, summarize it and propose a time that matches. Always guide them toward action.\n\nWhen replying to payment link issues, confirm the resend, restate all accepted payment methods, and make it easy for the customer to complete the step.\n\nWhen a customer requests pricing or mentions discount concerns, clearly confirm if they qualify, and softly promote membership benefits. Don't assume enrollment.\n\nWhen confirming deliveries, acknowledge prep actions (gate width, electrical readiness), check for any missing details (photos), and offer support from partners (like electricians).\n\nWhen confirming delivery times, include pre-visit requests: photos of the install location, access points, or power setup. Proactively prevent issues.\n\nWhen replying with technical specs, go beyond generalities â€” include amperage, clearance, or installation advice if asked. If info is missing, say so clearly and offer a follow-up.\n\nWhen addressing warranty questions, validate their frustration, clarify eligibility, and offer a booking option with a clear link and time. Ask for symptoms only if needed.\n\nWhen handling attachments (photos, videos), always confirm receipt and acknowledge how they helped assess the issue.\n\nWhen a message involves an active thread or confirmed service, prioritize continuity â€” don't reopen the \"repair vs removal\" question. Stay focused on technician prep and customer expectations.\n\nWhen no response has come in after 3+ days on an active thread, send a friendly nudge like:\n\"Just checking in â€” would you like us to hold off, or should we go ahead and schedule that visit?\"\n\nWhen a customer asks about payment timing and incomplete service, confirm payment is due upon completion and acknowledge the unfinished work.\n\nEvery reply should:\n\nBe concise if the customer message is brief.\nConfirm relevant dates, times, and next steps.\nInclude contact methods and booking links when possible.\nExpress gratitude and offer additional help (like bringing chemicals).\nAlways include human tone and helpful intent.",
    "classificationRules": [
      "Identify urgent keywords (leak, emergency, not working) and route to URGENT label",
      "Recognize support requests (repair, maintenance, water care) and route to SUPPORT label", 
      "Detect financial transactions (invoice, payment, e-transfer) and route to BANKING label",
      "Recognize supplier communications (AquaSpa, StrongSpas, etc.) and route to SUPPLIERS label",
      "Detect sales inquiries (new spa, consultation, quote) and route to SALES label",
      "Identify support requests (technical help, troubleshooting) and route to SUPPORT label"
    ]
  },

  "environmentVariables": {
    "required": [
      "BUSINESS_NAME",
      "BUSINESS_PHONE", 
      "BUSINESS_DOMAIN_PRIMARY",
      "PAYMENT_EMAIL",
      "WEBSITE_BASE_URL",
      "WEBSITE_REPAIRS_FORM",
      "WEBSITE_SPAS_PAGE",
      "WEBSITE_TREATMENT_PACKAGES",
      "WEBSITE_ALL_PRODUCTS",
      "TIMEZONE"
    ],
    "optional": [
      "BUSINESS_DOMAIN_SECONDARY",
      "SERVICE_AREA_PRIMARY",
      "DB_PREFIX"
    ],
    "pricing": [
      "PRICE_SITE_INSPECTION",
      "PRICE_LABOUR_HOURLY", 
      "PRICE_MILEAGE_RATE",
      "PRICE_DELIVERY_FEE",
      "PRICE_HARMONY_TREATMENT"
    ]
  },

  "validation": {
    "requiredFields": ["businessType", "intentMapping", "labelSchema", "keywords"],
    "colorValidation": "Must use Gmail API allowed colors",
    "intentValidation": "All intents must map to valid labels",
    "envVarValidation": "All n8nEnvVar values must be unique"
  }
}
